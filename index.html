<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bros Adventure Hub</title>
  <style>
    :root { --bg-black:#0d0d0d; --neon-green:#00ff66; --dark-gray:#1a1a1a; }
    * { box-sizing:border-box; }
    body { font-family:'Trebuchet MS', sans-serif; margin:0; background:var(--bg-black); color:var(--neon-green); }
    header { text-align:center; padding:2rem; background:var(--dark-gray); border-bottom:2px solid var(--neon-green); }
    header h1 { margin:0; font-size:2.5rem; color:var(--neon-green); }
    nav { background:var(--bg-black); display:flex; justify-content:center; padding:.5rem; border-bottom:2px solid var(--neon-green); position:sticky; top:0; z-index:10; }
    nav ul { list-style:none; display:flex; gap:1rem; margin:0; padding:0; flex-wrap:wrap; }
    nav a { text-decoration:none; color:var(--neon-green); font-weight:bold; padding:.5rem 1rem; border:1px solid var(--neon-green); border-radius:4px; transition:background .2s, color .2s; }
    nav a:hover { background:var(--neon-green); color:var(--bg-black); }
    section { padding:2rem; max-width:1000px; margin:auto; }
    h2 { border-bottom:2px solid var(--neon-green); padding-bottom:.5rem; margin-bottom:1rem; }
    .card { background:var(--dark-gray); color:var(--neon-green); border:1px solid var(--neon-green); border-radius:6px; padding:1rem; margin-bottom:1rem; }
    .message-board .message { padding:.4rem 0; border-bottom:1px dashed rgba(0,255,102,.35); }
    input, textarea, button { background:var(--bg-black); color:var(--neon-green); border:1px solid var(--neon-green); border-radius:4px; padding:.5rem; }
    textarea { min-height:100px; }
    button { font-weight:bold; }
    button:hover { background:var(--neon-green); color:var(--bg-black); cursor:pointer; }
    .row { display:flex; gap:.5rem; flex-wrap:wrap; }
    .admins { display:flex; gap:1rem; flex-wrap:wrap; }
    .admin-card { flex:1 1 220px; }
    .calendar-grid { display:grid; grid-template-columns:repeat(7, 1fr); gap:.5rem; }
    .calendar-grid .day { background:var(--dark-gray); border:1px solid var(--neon-green); border-radius:4px; padding:.5rem; min-height:90px; position:relative; }
    .calendar-grid .day strong { display:block; }
    .event { display:block; margin-top:.35rem; font-size:.85rem; }
    .news-item a { color:var(--neon-green); text-decoration:none; font-weight:bold; }
    .news-item a:hover { color:#fff; }
    .meta { font-size:.85rem; opacity:.8; }
    .actions { display:flex; gap:.4rem; margin-top:.5rem; }
    .actions button { padding:.35rem .6rem; font-size:.85rem; }
  </style>
</head>
<body>
  <header>
    <h1>Bros Adventure Hub</h1>
    <p>Black & Green Bros Style</p>
  </header>

  <nav>
    <ul>
      <li><a href="#messages">What's Up</a></li>
      <li><a href="#stories">Stories</a></li>
      <li><a href="#notes">Notes</a></li>
      <li><a href="#admins">Admins</a></li>
      <li><a href="#calendar">Calendar</a></li>
      <li><a href="#news">Latest News</a></li>
    </ul>
  </nav>

  <!-- Messaging -->
  <section id="messages">
    <h2>What's Up</h2>
    <div class="card message-board" id="messageBoard"></div>
    <form id="messageForm" class="row">
      <input type="text" id="messageInput" placeholder="Type your message..." required />
      <button type="submit">Send</button>
    </form>
  </section>

  <!-- Stories -->
  <section id="stories">
    <h2>Stories</h2>
    <div id="storyBoard"></div>
    <form id="storyForm" class="row">
      <input type="text" id="storyTitle" placeholder="Story title" required />
      <textarea id="storyContent" placeholder="Write your story..." required></textarea>
      <button type="submit">Post Story</button>
    </form>
    <p class="meta">Cooldown: 60 seconds between your story posts. You can edit or delete your story later.</p>
  </section>

  <!-- Notes -->
  <section id="notes">
    <h2>Notes</h2>
    <ul class="card" id="notesList" style="list-style:none; padding-left:1rem;"></ul>
    <form id="notesForm" class="row">
      <input type="text" id="noteInput" placeholder="Add a new note..." required />
      <button type="submit">Add Note</button>
    </form>
  </section>

  <!-- Admins -->
  <section id="admins">
    <h2>Admins</h2>
    <div class="admins">
      <div class="card admin-card"><h3>Nabil</h3><p>Founder & Designer</p></div>
      <div class="card admin-card"><h3>Friend1</h3><p>Community Manager</p></div>
      <div class="card admin-card"><h3>Friend2</h3><p>Event Organizer</p></div>
    </div>
  </section>

  <!-- Calendar -->
  <section id="calendar">
    <h2>Event Calendar (31 Days)</h2>
    <div class="calendar-grid" id="calendarGrid"></div>
    <form id="calendarForm" class="row">
      <input type="number" id="eventDay" placeholder="Day (1-31)" min="1" max="31" required />
      <input type="text" id="eventName" placeholder="Event name" required />
      <button type="submit">Add Event</button>
    </form>
  </section>

  <!-- Latest News -->
  <section id="news">
    <h2>Latest News</h2>
    <div class="card" id="newsBoard"></div>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Safe getters
      const $ = (id) => document.getElementById(id);

      // --- Messaging (localStorage) ---
      const messageBoard = $('messageBoard');
      const messageForm = $('messageForm');
      const messageInput = $('messageInput');

      function loadMessages() {
        const data = JSON.parse(localStorage.getItem('messages') || '[]');
        messageBoard.innerHTML = '';
        data.forEach(text => {
          const div = document.createElement('div');
          div.className = 'message';
          div.textContent = text;
          messageBoard.appendChild(div);
        });
      }
      loadMessages();

      messageForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const val = messageInput.value.trim();
        if (!val) return;
        const store = JSON.parse(localStorage.getItem('messages') || '[]');
        const msgText = 'You: ' + val;
        store.push(msgText);
        localStorage.setItem('messages', JSON.stringify(store));
        messageInput.value = '';
        loadMessages();
      });

      // --- Stories (localStorage) with cooldown + edit/delete ---
      const storyBoard = $('storyBoard');
      const storyForm = $('storyForm');
      const COOLDOWN_MS = 60000;

      function getStories() {
        return JSON.parse(localStorage.getItem('stories') || '[]');
      }
      function setStories(stories) {
        localStorage.setItem('stories', JSON.stringify(stories));
      }
      function renderStories() {
        storyBoard.innerHTML = '';
        getStories().forEach(s => {
          const wrap = document.createElement('div');
          wrap.className = 'card story';
          wrap.innerHTML = `
            <h3>${s.title}</h3>
            <p>${s.content}</p>
            <div class="actions">
              <button class="editBtn">Edit</button>
              <button class="deleteBtn">Delete</button>
            </div>
          `;
          // Edit
          wrap.querySelector('.editBtn').addEventListener('click', () => {
            const updated = prompt('Edit your story text:', s.content);
            if (updated !== null && updated.trim() !== '') {
              s.content = updated.trim();
              const all = getStories();
              const idx = all.findIndex(x => x.id === s.id);
              if (idx > -1) { all[idx] = s; setStories(all); renderStories(); }
            }
          });
          // Delete
          wrap.querySelector('.deleteBtn').addEventListener('click', () => {
            const all = getStories().filter(x => x.id !== s.id);
            setStories(all);
            renderStories();
          });
          storyBoard.appendChild(wrap);
        });
      }
      renderStories();

      // Cooldown tracking per device
      let lastStoryTime = parseInt(localStorage.getItem('lastStoryTime') || '0', 10);

      storyForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const now = Date.now();
        if (now - lastStoryTime < COOLDOWN_MS) {
          const wait = Math.ceil((COOLDOWN_MS - (now - lastStoryTime)) / 1000);
          alert('Please wait ' + wait + 's before posting another story.');
          return;
        }
        const title = $('storyTitle').value.trim();
        const content = $('storyContent').value.trim();
        if (!title || !content) return;

        const newStory = { id: Date.now(), title, content };
        const all = getStories();
        all.push(newStory);
        setStories(all);
        localStorage.setItem('lastStoryTime', String(now));
        lastStoryTime = now;
        storyForm.reset();
        renderStories();
      });

      // --- Notes (localStorage) ---
      const notesList = $('notesList');
      const notesForm = $('notesForm');
      const noteInput = $('noteInput');

      function loadNotes() {
        const data = JSON.parse(localStorage.getItem('notes') || '[]');
        notesList.innerHTML = '';
        data.forEach(text => {
          const li = document.createElement('li');
          li.className = 'card';
          li.textContent = text;
          notesList.appendChild(li);
        });
      }
      loadNotes();

      notesForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const val = noteInput.value.trim();
        if (!val) return;
        const store = JSON.parse(localStorage.getItem('notes') || '[]');
        store.push(val);
        localStorage.setItem('notes', JSON.stringify(store));
        noteInput.value = '';
        loadNotes();
      });

      // --- Calendar (31 days, localStorage) ---
      const calendarGrid = $('calendarGrid');
      function loadCalendar() {
        calendarGrid.innerHTML = '';
        const events = JSON.parse(localStorage.getItem('events') || '{}');
        for (let day = 1; day <= 31; day++) {
          const cell = document.createElement('div');
          cell.className = 'day';
          cell.dataset.day = String(day);
          cell.innerHTML = `<strong>${day}</strong>`;
          (events[day] || []).forEach(name => {
            const span = document.createElement('span');
            span.className = 'event';
            span.textContent = name;
            cell.appendChild(span);
          });
          calendarGrid.appendChild(cell);
        }
      }
      loadCalendar();

      $('calendarForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const d = parseInt($('eventDay').value, 10);
        const name = $('eventName').value.trim();
        if (isNaN(d) || d < 1 || d > 31 || !name) return;
        const events = JSON.parse(localStorage.getItem('events') || '{}');
        events[d] = events[d] || [];
        events[d].push(name);
        localStorage.setItem('events', JSON.stringify(events));
        e.target.reset();
        loadCalendar();
      });

      // --- Latest News (static + one fake) ---
      const newsBoard = $('newsBoard');
      const headlines = [
        { title: "Global markets rebound after holiday slump", url: "https://www.bbc.com/news/business" },
        { title: "Tech companies unveil new AI tools in 2026", url: "https://www.cnn.com/technology" },
        { title: "Lebanon hosts major cultural festival this week", url: "https://www.aljazeera.com/culture" },
        { title: "ðŸš€ Bros Adventure launches secret spaceship to the moon (FAKE)", url: "#" }
      ];
      newsBoard.innerHTML = '';
      headlines.forEach(item => {
        const div = document.createElement('div');
        div.className = 'card news-item';
        div.innerHTML = `<a href="${item.url}" target="_blank">${item.title}</a>`;
        newsBoard.appendChild(div);
      });
    });
  </script>
</body>
</html>

